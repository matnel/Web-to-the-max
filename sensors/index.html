<hml>
<head>
<title>Accelometer & geolocation</title>
<script type='text/javascript' src='../libs/jquery.js'></script>
</head>
<body>

<div id='block' style='background: pink; width: 20px; height: 20px; position: absolute;'>

<script type='text/javascript'>

function accelometer( event ) {
    // TODO: Are these correct?
    var z = event.alpha;
    var x = event.beta;
    var y = event.gamma;

    var win = $(window);
    var block = $('#block');

    var dx = block.position().top;
    var dy = block.position().left;

   if( Math.abs( x ) > 30 ) {
       dx = dx - x;
       if( dx < 0 ) dx = 0;
       if( dx > win.height() - block.height() ) dx = win.height() - block.height();
   }

   if( Math.abs( y ) > 30 ) {
	dy = dy + y;
	if( dy < 0 ) dy = 0;
	if( dy > win.width() - block.width() ) dy = win.width() - block.width();
   }

   block.css('top', dx + 'px' );
   block.css('left', dy + 'px' );

}

window.addEventListener('deviceorientation', accelometer );

</script>

</body>
</html>
